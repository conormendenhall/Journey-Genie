<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Journey Genie</title>
<script src="https://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script type="text/javascript">
 function getCountries(){ 
	$.getJSON("countries.json", function(json){
  	var length = Object.keys(json).length;
  	var counter = 0;
	$.each(json, function(){
		if(this.iso === "US")
			{
			$('#countries').append("<option selected='selected' value=" + this.iso + ">" + this.name + "</option>");
			}
		else
			{
			$('#countries').append("<option value=" + this.iso + ">" + this.name + "</option>");
			}
});
});
}

function findAddress() {
	var city = document.getElementById('city').value;
	var country = document.getElementById('countries').value;
	/*
	var matches = new Array();
	 $.getJSON("city_list.json", function(json){
		  	var length = Object.keys(json).length;
		  	var counter = 0;
			$.each(json, function(){
				if(city.toLowerCase() === this.nm.toLowerCase() && country.toLowerCase() === this.countryCode.toLowerCase()){
					console.log(this.id)
					matches.push(this);
				}
			counter++;
      });
	console.log(matches);
			if(/*matches.length === 1 && *///counter === length)
				//{
				  $.ajax({
				       	type: "POST",
				        url: "APIKey",
				        data: {"cityID": city, "countryID": country/*matches[0].id*/},
				        dataType: "json",
				                //beforeSend: function() {
				                      //if(s === "")
				                         //return false;
				                   // },
				        success: function(data){
				        	//var jsonResult = JSON.stringify(data);
				        	$('#itemList').empty();
				        	$.each(data.items, function(i, value) {
				        		$('#itemList').append("<li>" + this.name + "</li>");
				            });

				//}
	 // });
                                        }
});
}
 </script>
  </head>
  <body onload="getCountries()">
    <div id="panel">
      <input id ="city" type="text" placeholder="Enter Zip Code" value = "">
      <select id = "countries">
      </select>
      <input type="button" value="Get Packing!" onclick="findAddress()">
    </div>
    <div id="map-canvas">
    <ul id="itemList">
    </ul>
    </div>
  </body>
</html>